# Title: Eclipse

Date: 2014-09-09 13:45
Tags: []
Categories: []

<!-- toc -->

---

## Prelude

- Version: Eclipse Mars
    - office: `eclipse-java-mars-2-win32-x86_64.zip`

## Settings

### General

- ツールバーのテキスト表示無効化:
        Right click - Show text - uncheck
- Perspective tool-barを左端に移動.
- Tool bar - Next Annotation ▼ - Error以外 : unchecked.(エラーのみを修正していくことが多いので) : TODO: Error/Warningを両方区別して飛びたい
- Perspective
    - Outlineを右にする
    - Progress, {Other}を中央下部にする

#### Working sets

- Configure Working Sets
    - {Project Group} : 任意のプロジェクトグループごと.
    - Sandbox         : 実験用.
    - Third           : 3rd party用
    - Old             : 基本見ない古いやつ.
    - Other Projects  : デフォルトである、それ以外.

### INI files (eclipse.ini)

- メモリ割当て

        -Xms1g
        -Xmx2g

- コンソールの文字化け対応のためUTF-8にする

        -Dfile.encoding=utf-8

まとめ

    -startup
    plugins/org.eclipse.equinox.launcher_1.3.100.v20150511-1540.jar
    --launcher.library
    plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.300.v20150602-1417
    -product
    org.eclipse.epp.package.java.product
    --launcher.defaultAction
    openFile
    --launcher.XXMaxPermSize
    256M
    -showsplash
    org.eclipse.platform
    --launcher.XXMaxPermSize
    256m
    --launcher.defaultAction
    openFile
    --launcher.appendVmargs
    -vmargs
    -Dosgi.requiredJavaVersion=1.7
    -Xms1g
    -Xmx2g
    -Dfile.encoding=utf-8

### Tool Bar

- Launch
    - External Tools
        - External Tools Configurations..
            - Add mintty
                - Main
                    - Location: tool path (mingw64.exe)
                    - Working Directory: ${resource_loc}
                    \* 設定時、Eclipse上で「ディレクトリ」を選択していないとエラー表示されるが問題なし!
                - Build
                    - Build before launch : unchecked
                - Common
                    - Display in favorites menu : checked
                    - Launch in background : checked

### Window

- Perspective - Customize Perspective - Command Groups Availability - Window Working Set | Working Set Manipulation : checked. <http://mcuoneclipse.com/2012/05/17/eclipse-working-sets-explained/>

### Views

#### Package Explorer

- View Menu
    - Top Level Elements   : Working Sets

#### Tasks

TasksにPackage Explorerで選択した範囲のみ表示する

- View Menu
    - Show - TODOs : checked

#### Problems

- View Menu
    - Show : Errors/Warnings on Project

### Preferences

- なるべくデフォルト厨
- できるものは設定のexport,importで移行する。
    \* 設定ファイル(epf)はdotfiles管理するが視認性が悪いので↓もメンテすること。

- General
    - Appearance
        - Colors and Font
            - Basic
                - Text Font : Ricty Diminished : 10
    - Editors
        - File Associations
            - ftl TODO: ?
        - Structured Text Editors
            - Task Tags
                - Enable searching for Task Tags : checked
        - Text Editors
            - Displayed tab width: 2
            - Show print margin - print margin column: specify same with Java Maximum line width value(e.g. 100).
            - Show whitespace characters : checked
                - configure visibility
                    - Space
                        - Enclosed : unchecked
            - Spelling
                - Enable spell checking : check
                - User defined dictionary : specify
                - Encoding : UTF-8
    - Keys
        - Scheme: `Vim's key bindings`(pluginインストール後じゃないとできない)
        - Command : Vrapper用のキーを無効(Refs: `.vrapperrc`)
- Java
    - Appearance
        - Members Sort Order
            - case 1 - staticか否かが設計で頻繁に変わる場合 : Types -> Static Fields -> Fields -> Static Initializers -> Initializers -> Constructors -> Static Methods -> Methods
            - case 2 - keep default                         : Types -> Static Fields -> Static Initializers -> Static Methods -> Fields -> Initializers -> Constructors -> Methods
            \* ただしTypesは場合によって最下部がよさそう
            - Sort members in same category by visibility : checked
                - Public -> Protected -> Default -> Private
        - Type Filters : add [java.awt.List]
    - Code Style
        - Formatter
            - New...
                - Profile name: Eclipse [custom]
                - Initialize settings with the following profile: Eclipse [built-in]
            - Edit...
                - Indentation
                    - General settings
                        - Tab size: 2
    - Editor
        - Content Assist
            - Advanced
                - Default Proposal Kinds
                    - Java Non-Type Proposals : checked!(候補が重複して表示されるように見えるので、代わりに Intelligent Java Proposals をunchecked! - > 今度はほしい時にだめになった..
        - Templates
            - testc  : Setup,Exercise,Verifyコメントを入れる
            - log    : logger定義
            - lstack : log stacktrace
    - Installed JREs
        - Add... : add system jre(in jdk).
- Team
    - Git
        - 直下
            - Cloning repositories
                - Default repository folder: D:¥admin¥Development \* @office
    - Ignored Resources
        - Add Pattern... : target, Settings, .settings, .classpath, .project, *.swo, *.swp, tags, .tags

#### About Data Management

- Preferences > Data Management
- Window > Show View > Data Management > Data Source Explorer

## Plug-ins

- EasyShell : From Marketplace
- EclEmma Java Code Coverage(jacoco)  : From Marketplace
- Eclipse Checkstyle Plug-in : From Marketplace
- Eclipse Metrics Plugin(frank sauer) : <http://metrics.sourceforge.net/update>
- FindBugs Eclipse Plugin : From Marketplace
- HTML Editor (WTP) Mars : From Marketplace
- JBoss Tools - FreeMaker IDE
- JBoss Tools - JBoss OpenShift Tools
- Java Decompiler Eclipse Plug-in : <http://jd.benow.ca/jd-eclipse/update> : required Microsoft Visual C++ 2008 SP1 Redistributable Package
- Lombok
- M2Eclipse(m2e) : built-in
- Marketplace Client : built-in
- eclipse-pmd (PMD) : From Marketplace
- Plant UML : <http://basar.idi.ntnu.no/svn/tdt4100/anonymous/trunk/updatesite/>
- Quick JUnit : From Marketplace : デフォルトだとなぜかCtrl+0で全テスト実行されてしまう。再インストールすると直った。
- ShellEd : <http://sourceforge.net/projects/shelled/files/shelled/update/>
- StepCounter : <https://github.com/takezoe/stepcounter>
- TM Terminal : From Marketplace
- Vrapper : <http://vrapper.sourceforge.net/update-site/stable> : MarketplaceにもあるがpluginをどうせURLから入れる。unstableのほうが機能豊富
- Codic Eclipse Plugin : <http://kenji-namba.github.io/codic-eclipse-plugin/updates> <https://github.com/kenji-namba/codic-eclipse-plugin>

### Useless

- Eclipse Color Theme  : いらない
- File Bookmark Plugin : <http://sourceforge.jp/projects/filebookmark/> : eclipse Luna だと使えないっぽい。。
- Subversive           : From Marketplace
- m2e-subversive       : Check out as Maven Project が出るようになる: File - import - Maven - Check out Maven Projects from SCM - m2e Marketplace - m2e-subversive

### CheckStyle

Sun Checks (Eclipse) を元に以下変更 TODO: 今だったらGoogle Checksのほうがよさそう
設定ファイルをファイルで保存。(External Configuration File)
TODO: デフォルトとの差分だけを管理できないか

- Miscellaneous
    - Final Parameters : ignore
- Javadoc Comments
    - Style Javadoc
        - end of sentenceFormat : ([(.|。)?!][ ¥t¥n¥r¥f<])|([(.|。)?!]$)
    - package private以下のスコープはチェックしない

### Eclipse Metrics Plugin

- Total Lines of Code          : 600
- Method Lines of Code         : 50
- Nested Block Depth           : 5
- McCabe Cyclomatic Complexity : 10
- Number of Parameters         : 5

### FindBugs

- analysis effort : Maximal
- Reporter Configuration
    - Minimum rank to report : 20 (Of Concern)
    - レポートする最小の優先度 : Low
    - Reported (visible) bug categories : all check.
    - Mark bugs with ... rank as: Info (all)

### M2Eclipse(m2e)

- General
    - Editors
        - File Associations
            - pom.xml : XML Editor to default.(Maven POM EditorだとVrapperが変な動きになるので)

### PMD

- Preferences
    - PMD
        - Log file name: D:¥admin¥Tmp¥pmd-eclipse¥pmd-eclipse.log

### Subversive

- Notes
    [Eclipse subversion ディレクトリがSwitchになってしまった時 -でじうぃき](http://onlineconsultant.jp/pukiwiki/?Eclipse%20subversion%20%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%88%E3%83%AA%E3%81%8CSwitch%E3%81%AB%E3%81%AA%E3%81%A3%E3%81%A6%E3%81%97%E3%81%BE%E3%81%A3%E3%81%9F%E6%99%82)

### Vrapper

Plug-ins

- Java Extensions
- Split Editor Plugin
- Surround.vim
- argtextobj.vim        : 引数を対象とするtextobj.     : {motion}(i|a)a
- methodtextobj.vim     : methodを対象とするtextobj.   : {motion}(i|a)f
- textobj-line.vim      : 引数を対象とするtextobj.     : {motion}(i|a)l
- vim-indent-object.vim : 同一インデントを対象とする？ : {motion}(i|a)i?

Notes

- /¥Cで大文字小文字考慮した検索
- /¥cで大文字小文字考慮しない検索

### codic eclipse plugin

Ctrl+Shift+Dでクイック辞書検索
\* もともと割り当てられたものをALT+Ctrl+Shift+Dに退避

## Shortcut keys

### General shortcut

- ツールチップ説明の表示 (Show Tooltip Description) (マウスホバーで表示されるエラーや警告の表示) :

        F2

- 定義位置へ :

        F3

- クラス階層を開く・階層ビュー :

        F4

- 次の注釈箇所へ(デフォルトはエラー、警告) :

        Ctrl + .

- 前の注釈箇所へ(デフォルトはエラー、警告) :

        Ctrl + ,

- 変数名補足

        Ctrl + 2 -> l

- サーチ

        Alt + h

- ブレークポイント切り替え :

        Ctrl + Shift + b

- コメントアウトトグル(xml も OK) :

        Ctrl + Shift + c

- References in Workspace - ワークスペース内を検索 :

        Ctrl + Shift + g

- ショートカットキー一覧を表示 :

        Ctrl + Shift + l

- インポートを編成

        Ctrl + Shift + o

- クラスを開く :

        Ctrl + Shift + t

- リソースを開く :

        Ctrl + Shift + r

- クラス階層を開く・ダイアログ :

        Ctrl + Shift + h

- 呼び出し階層を開く :

        Ctrl + Alt + h

### JUnit

- テストクラス行き来:

        Ctrl + 9

- テスト実行(メソッド内:1テストのみ メソッド外:全テスト) :

        Ctrl + 0

- テストデバッグ実行:

        Ctrl + Shift + 0

### Rare

- スネークケース、キャメルケース切り替え

        Ctrl + Alt + k

### Unused (alternative in Vrapper)

- 進む :

        Alt + → -> Ctrl + i

- 戻る :

        Alt + ← -> Ctrl + o

- 名前変更 :

        Alt + Shift + r -> gR

- ソース編集関連のメニュー表示。メソッドのオーバーライドやコンストラクタ作成などをしたい時にメニューをこれで呼び出します。 :

        Alt + Shift + s -> gm

- Toggle Folding :

        Ctrl + Numpad_Divide

- 折りたたみトグル :

        Ctrl + ;

- エディタ最大化トグル :

        Ctrl + m -> sm

### Key Change (escape for Vrapper)

- クラス階層を開く・クイック型階層、実装クラスを探す :

        Ctrl + t -> Alt + t

### Refs

- [Eclipseショートカット・移動・ファイル間 - Strategic Choice](http://d.hatena.ne.jp/asakichy/20100216/1266280192)

## Technique, Caution

- 既存ソースをもとにプロジェクトを作成 (意外とめんどい Refs: [java - How to create a project from existing source in Eclipse and then find it? - Stack Overflow](http://stackoverflow.com/questions/2636201/how-to-create-a-project-from-existing-source-in-eclipse-and-then-find-it))
    - ProjectNameの名前のディレクトリをworkspace内に作成し、ソースを全て格納
    - [File] - [New] - [JavaProject] : [Project name]と[Location]を↑と同じに指定
    - 警告が出るので[Next >]押下で作成できるはず
- JUnit構成のプロジェクト作成
        File - New - Maven - Maven Project
- システムプロパティを設定してrun
        Run - Run configurations, select project, second tab: “Arguments”. Top box is for your program, bottom box is for VM arguments, e.g. -Dkey=value.
- 特定のリビジョンに戻したい
        ナビゲータービューで、元に戻したいファイルを右クリック→置換→HEAD改訂（またはローカルヒストリー）
        置換機能で書き換えられる箇所を知りたい場合には、
        ナビゲータービューで、元に戻したいファイルを右クリック→比較→HEAD改訂（またはローカルヒストリー）
    Refs: [Eclipseでローカルのファイルを元に戻す方法 Hack](http://hack.aipo.com/archives/1447/)
- 補完アクション(Save Actions)が無効にならない
    Any Edit プラグインが悪さしている可能性がある。[アウトプットメモ: eclipseでソースコードを保存したときに&#12289;空の行のインデントが自動で削除されないようにする方法](http://y188ra.blogspot.jp/2011/01/eclipse.html)
